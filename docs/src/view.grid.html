<!DOCTYPE html>

<html>
<head>
  <title>view.grid.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
  <link rel="stylesheet" media="all" href="docco.css" />
</head>
<body>
  <div id="container">
    <div id="background"></div>
    
      <ul id="jump_to">
        <li>
          <a class="large" href="javascript:void(0);">Jump To &hellip;</a>
          <a class="small" href="javascript:void(0);">+</a>
          <div id="jump_wrapper">
          <div id="jump_page_wrapper">
            <div id="jump_page">
              
                
                <a class="source" href="backend.dataproxy.html">
                  backend.dataproxy.js
                </a>
              
                
                <a class="source" href="backend.memory.html">
                  backend.memory.js
                </a>
              
                
                <a class="source" href="ecma-fixes.html">
                  ecma-fixes.js
                </a>
              
                
                <a class="source" href="model.html">
                  model.js
                </a>
              
                
                <a class="source" href="view.flot.html">
                  view.flot.js
                </a>
              
                
                <a class="source" href="view.graph.html">
                  view.graph.js
                </a>
              
                
                <a class="source" href="view.grid.html">
                  view.grid.js
                </a>
              
                
                <a class="source" href="view.map.html">
                  view.map.js
                </a>
              
                
                <a class="source" href="view.multiview.html">
                  view.multiview.js
                </a>
              
                
                <a class="source" href="view.slickgrid.html">
                  view.slickgrid.js
                </a>
              
                
                <a class="source" href="view.timeline.html">
                  view.timeline.js
                </a>
              
                
                <a class="source" href="widget.facetviewer.html">
                  widget.facetviewer.js
                </a>
              
                
                <a class="source" href="widget.fields.html">
                  widget.fields.js
                </a>
              
                
                <a class="source" href="widget.filtereditor.html">
                  widget.filtereditor.js
                </a>
              
                
                <a class="source" href="widget.pager.html">
                  widget.pager.js
                </a>
              
                
                <a class="source" href="widget.queryeditor.html">
                  widget.queryeditor.js
                </a>
              
                
                <a class="source" href="widget.valuefilter.html">
                  widget.valuefilter.js
                </a>
              
            </div>
          </div>
        </li>
      </ul>
    
    <ul class="sections">
        
          <li id="title">
              <div class="annotation">
                  <h1>view.grid.js</h1>
              </div>
          </li>
        
        
        
        <li id="section-1">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-1">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-comment">/*jshint multistr:true */</span>

<span class="hljs-keyword">this</span>.recline = <span class="hljs-keyword">this</span>.recline || {};
<span class="hljs-keyword">this</span>.recline.View = <span class="hljs-keyword">this</span>.recline.View || {};

(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">$, my</span>) </span>{
<span class="hljs-meta">  "use strict"</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-2">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-2">&#182;</a>
              </div>
              <h2 id="-data-grid-dataset-view">(Data) Grid Dataset View</h2>
<p>Provides a tabular view on a Dataset.</p>
<p>Initialize it with a <code>recline.Model.Dataset</code>.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>my.Grid = Backbone.View.extend({
  <span class="hljs-attr">tagName</span>:  <span class="hljs-string">"div"</span>,
  <span class="hljs-attr">className</span>: <span class="hljs-string">"recline-grid-container"</span>,

  <span class="hljs-attr">initialize</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">modelEtc</span>) </span>{
    <span class="hljs-keyword">var</span> self = <span class="hljs-keyword">this</span>;
    _.bindAll(<span class="hljs-keyword">this</span>, <span class="hljs-string">'render'</span>, <span class="hljs-string">'onHorizontalScroll'</span>);
    <span class="hljs-keyword">this</span>.listenTo(<span class="hljs-keyword">this</span>.model.records, <span class="hljs-string">'add reset remove'</span>, <span class="hljs-keyword">this</span>.render);
    <span class="hljs-keyword">this</span>.tempState = {};
    <span class="hljs-keyword">var</span> state = _.extend({
        <span class="hljs-attr">hiddenFields</span>: []
      }, modelEtc.state
    ); 
    <span class="hljs-keyword">this</span>.state = <span class="hljs-keyword">new</span> recline.Model.ObjectState(state);
  },

  <span class="hljs-attr">events</span>: {</pre></div></div>
            
        </li>
        
        
        <li id="section-3">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-3">&#182;</a>
              </div>
              <p>does not work here so done at end of render function
‘scroll .recline-grid tbody’: ‘onHorizontalScroll’</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  },</pre></div></div>
            
        </li>
        
        
        <li id="section-4">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-4">&#182;</a>
              </div>
              <p>======================================================</p>

            </div>
            
        </li>
        
        
        <li id="section-5">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-5">&#182;</a>
              </div>
              <p>Column and row menus</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
  setColumnSort: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">order</span>) </span>{
    <span class="hljs-keyword">var</span> sort = [{}];
    sort[<span class="hljs-number">0</span>][<span class="hljs-keyword">this</span>.tempState.currentColumn] = {<span class="hljs-attr">order</span>: order};
    <span class="hljs-keyword">this</span>.model.query({<span class="hljs-attr">sort</span>: sort});
  },
  
  <span class="hljs-attr">hideColumn</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> hiddenFields = <span class="hljs-keyword">this</span>.state.get(<span class="hljs-string">'hiddenFields'</span>);
    hiddenFields.push(<span class="hljs-keyword">this</span>.tempState.currentColumn);
    <span class="hljs-keyword">this</span>.state.set({<span class="hljs-attr">hiddenFields</span>: hiddenFields});</pre></div></div>
            
        </li>
        
        
        <li id="section-6">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-6">&#182;</a>
              </div>
              <p>change event not being triggered (because it is an array?) so trigger manually</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">this</span>.state.trigger(<span class="hljs-string">'change'</span>);
    <span class="hljs-keyword">this</span>.render();
  },
  
  <span class="hljs-attr">showColumn</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
    <span class="hljs-keyword">var</span> hiddenFields = _.without(<span class="hljs-keyword">this</span>.state.get(<span class="hljs-string">'hiddenFields'</span>), $(e.target).data(<span class="hljs-string">'column'</span>));
    <span class="hljs-keyword">this</span>.state.set({<span class="hljs-attr">hiddenFields</span>: hiddenFields});
    <span class="hljs-keyword">this</span>.render();
  },

  <span class="hljs-attr">onHorizontalScroll</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
    <span class="hljs-keyword">var</span> currentScroll = $(e.target).scrollLeft();
    <span class="hljs-keyword">this</span>.$el.find(<span class="hljs-string">'.recline-grid thead tr'</span>).scrollLeft(currentScroll);
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-7">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-7">&#182;</a>
              </div>
              <p>======================================================</p>

            </div>
            
        </li>
        
        
        <li id="section-8">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-8">&#182;</a>
              </div>
              <h4 id="templating">Templating</h4>

            </div>
            
            <div class="content"><div class='highlight'><pre>  template: <span class="hljs-string">' \
    &lt;div class="table-container"&gt; \
    &lt;table class="recline-grid table-striped table-condensed" cellspacing="0"&gt; \
      &lt;thead class="fixed-header"&gt; \
        &lt;tr&gt; \
          {{#fields}} \
            &lt;th class="column-header {{#hidden}}hidden{{/hidden}}" data-field="{{id}}" style="width: {{width}}px; max-width: {{width}}px; min-width: {{width}}px;" title="{{label}}"&gt; \
              &lt;span class="column-header-name"&gt;{{label}}&lt;/span&gt; \
            &lt;/th&gt; \
          {{/fields}} \
          &lt;th class="last-header" style="width: {{lastHeaderWidth}}px; max-width: {{lastHeaderWidth}}px; min-width: {{lastHeaderWidth}}px; padding: 0; margin: 0;"&gt;&lt;/th&gt; \
        &lt;/tr&gt; \
      &lt;/thead&gt; \
      &lt;tbody class="scroll-content"&gt;&lt;/tbody&gt; \
    &lt;/table&gt; \
    &lt;/div&gt; \
  '</span>,

  <span class="hljs-attr">toTemplateJSON</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> self = <span class="hljs-keyword">this</span>; 
    <span class="hljs-keyword">var</span> modelData = <span class="hljs-keyword">this</span>.model.toJSON();
    modelData.notEmpty = ( <span class="hljs-keyword">this</span>.fields.length &gt; <span class="hljs-number">0</span> );</pre></div></div>
            
        </li>
        
        
        <li id="section-9">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-9">&#182;</a>
              </div>
              <p>TODO: move this sort of thing into a toTemplateJSON method on Dataset?</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    modelData.fields = <span class="hljs-keyword">this</span>.fields.map(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">field</span>) </span>{
      <span class="hljs-keyword">return</span> field.toJSON();
    });</pre></div></div>
            
        </li>
        
        
        <li id="section-10">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-10">&#182;</a>
              </div>
              <p>last header width = scroll bar - border (2px) */</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    modelData.lastHeaderWidth = <span class="hljs-keyword">this</span>.scrollbarDimensions.width - <span class="hljs-number">2</span>;
    <span class="hljs-keyword">return</span> modelData;
  },
  <span class="hljs-attr">render</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> self = <span class="hljs-keyword">this</span>;
    <span class="hljs-keyword">this</span>.fields = <span class="hljs-keyword">new</span> recline.Model.FieldList(<span class="hljs-keyword">this</span>.model.fields.filter(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">field</span>) </span>{
      <span class="hljs-keyword">return</span> _.indexOf(self.state.get(<span class="hljs-string">'hiddenFields'</span>), field.id) == <span class="hljs-number">-1</span>;
    }));

    <span class="hljs-keyword">this</span>.scrollbarDimensions = <span class="hljs-keyword">this</span>.scrollbarDimensions || <span class="hljs-keyword">this</span>._scrollbarSize(); <span class="hljs-comment">// skip measurement if already have dimensions</span>
    <span class="hljs-keyword">var</span> numFields = <span class="hljs-keyword">this</span>.fields.length;</pre></div></div>
            
        </li>
        
        
        <li id="section-11">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-11">&#182;</a>
              </div>
              <p>compute field widths (-20 for first menu col + 10px for padding on each col and finally 16px for the scrollbar)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">var</span> fullWidth = self.$el.width() - <span class="hljs-number">20</span> - <span class="hljs-number">10</span> * numFields - <span class="hljs-keyword">this</span>.scrollbarDimensions.width;
    <span class="hljs-keyword">var</span> width = <span class="hljs-built_in">parseInt</span>(<span class="hljs-built_in">Math</span>.max(<span class="hljs-number">50</span>, fullWidth / numFields), <span class="hljs-number">10</span>);</pre></div></div>
            
        </li>
        
        
        <li id="section-12">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-12">&#182;</a>
              </div>
              <p>if columns extend outside viewport then remainder is 0 </p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">var</span> remainder = <span class="hljs-built_in">Math</span>.max(fullWidth - numFields * width,<span class="hljs-number">0</span>);
    <span class="hljs-keyword">this</span>.fields.each(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">field, idx</span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-13">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-13">&#182;</a>
              </div>
              <p>add the remainder to the first field width so we make up full col</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-keyword">if</span> (idx === <span class="hljs-number">0</span>) {
        field.set({<span class="hljs-attr">width</span>: width+remainder});
      } <span class="hljs-keyword">else</span> {
        field.set({<span class="hljs-attr">width</span>: width});
      }
    });
    <span class="hljs-keyword">var</span> htmls = Mustache.render(<span class="hljs-keyword">this</span>.template, <span class="hljs-keyword">this</span>.toTemplateJSON());
    <span class="hljs-keyword">this</span>.$el.html(htmls);
    <span class="hljs-keyword">this</span>.model.records.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">doc</span>) </span>{
      <span class="hljs-keyword">var</span> tr = $(<span class="hljs-string">'&lt;tr /&gt;'</span>);
      self.$el.find(<span class="hljs-string">'tbody'</span>).append(tr);
      <span class="hljs-keyword">var</span> newView = <span class="hljs-keyword">new</span> my.GridRow({
          <span class="hljs-attr">model</span>: doc,
          <span class="hljs-attr">el</span>: tr,
          <span class="hljs-attr">fields</span>: self.fields
        });
      newView.render();
    });</pre></div></div>
            
        </li>
        
        
        <li id="section-14">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-14">&#182;</a>
              </div>
              <p>hide extra header col if no scrollbar to avoid unsightly overhang</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">var</span> $tbody = <span class="hljs-keyword">this</span>.$el.find(<span class="hljs-string">'tbody'</span>)[<span class="hljs-number">0</span>];
    <span class="hljs-keyword">if</span> ($tbody.scrollHeight &lt;= $tbody.offsetHeight) {
      <span class="hljs-keyword">this</span>.$el.find(<span class="hljs-string">'th.last-header'</span>).hide();
    }
    <span class="hljs-keyword">this</span>.$el.find(<span class="hljs-string">'.recline-grid'</span>).toggleClass(<span class="hljs-string">'no-hidden'</span>, (self.state.get(<span class="hljs-string">'hiddenFields'</span>).length === <span class="hljs-number">0</span>));
    <span class="hljs-keyword">this</span>.$el.find(<span class="hljs-string">'.recline-grid tbody'</span>).scroll(<span class="hljs-keyword">this</span>.onHorizontalScroll);
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-15">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-15">&#182;</a>
              </div>
              <h3 id="_scrollbarsize">_scrollbarSize</h3>
<p>Measure width of a vertical scrollbar and height of a horizontal scrollbar.</p>
<p>@return: { width: pixelWidth, height: pixelHeight }</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  _scrollbarSize: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> $c = $(<span class="hljs-string">"&lt;div style='position:absolute; top:-10000px; left:-10000px; width:100px; height:100px; overflow:scroll;'&gt;&lt;/div&gt;"</span>).appendTo(<span class="hljs-string">"body"</span>);
    <span class="hljs-keyword">var</span> dim = { <span class="hljs-attr">width</span>: $c.width() - $c[<span class="hljs-number">0</span>].clientWidth + <span class="hljs-number">1</span>, <span class="hljs-attr">height</span>: $c.height() - $c[<span class="hljs-number">0</span>].clientHeight };
    $c.remove();
    <span class="hljs-keyword">return</span> dim;
  }
});</pre></div></div>
            
        </li>
        
        
        <li id="section-16">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-16">&#182;</a>
              </div>
              <h2 id="gridrow-view-for-rendering-an-individual-record-">GridRow View for rendering an individual record.</h2>
<p>Since we want this to update in place it is up to creator to provider the element to attach to.</p>
<p>In addition you <em>must</em> pass in a FieldList in the constructor options. This should be list of fields for the Grid.</p>
<p>Example:</p>
<pre>
var row = new GridRow({
  model: dataset-record,
    el: dom-element,
    fields: mydatasets.fields // a FieldList object
  });
</pre>

            </div>
            
            <div class="content"><div class='highlight'><pre>my.GridRow = Backbone.View.extend({
  <span class="hljs-attr">initialize</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">initData</span>) </span>{
    _.bindAll(<span class="hljs-keyword">this</span>, <span class="hljs-string">'render'</span>);
    <span class="hljs-keyword">this</span>._fields = initData.fields;
    <span class="hljs-keyword">this</span>.listenTo(<span class="hljs-keyword">this</span>.model, <span class="hljs-string">'change'</span>, <span class="hljs-keyword">this</span>.render);
  },

  <span class="hljs-attr">template</span>: <span class="hljs-string">' \
      {{#cells}} \
      &lt;td data-field="{{field}}" style="width: {{width}}px; max-width: {{width}}px; min-width: {{width}}px;"&gt; \
        &lt;div class="data-table-cell-content"&gt; \
          &lt;a href="javascript:{}" class="data-table-cell-edit" title="Edit this cell"&gt;&amp;nbsp;&lt;/a&gt; \
          &lt;div class="data-table-cell-value"&gt;{{{value}}}&lt;/div&gt; \
        &lt;/div&gt; \
      &lt;/td&gt; \
      {{/cells}} \
    '</span>,
  <span class="hljs-attr">events</span>: {
    <span class="hljs-string">'click .data-table-cell-edit'</span>: <span class="hljs-string">'onEditClick'</span>,
    <span class="hljs-string">'click .data-table-cell-editor .okButton'</span>: <span class="hljs-string">'onEditorOK'</span>,
    <span class="hljs-string">'click .data-table-cell-editor .cancelButton'</span>: <span class="hljs-string">'onEditorCancel'</span>
  },
  
  <span class="hljs-attr">toTemplateJSON</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> self = <span class="hljs-keyword">this</span>;
    <span class="hljs-keyword">var</span> doc = <span class="hljs-keyword">this</span>.model;
    <span class="hljs-keyword">var</span> cellData = <span class="hljs-keyword">this</span>._fields.map(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">field</span>) </span>{
      <span class="hljs-keyword">return</span> {
        <span class="hljs-attr">field</span>: field.id,
        <span class="hljs-attr">width</span>: field.get(<span class="hljs-string">'width'</span>),
        <span class="hljs-attr">value</span>: doc.getFieldValue(field)
      };
    });
    <span class="hljs-keyword">return</span> { <span class="hljs-attr">id</span>: <span class="hljs-keyword">this</span>.id, <span class="hljs-attr">cells</span>: cellData };
  },

  <span class="hljs-attr">render</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">this</span>.$el.attr(<span class="hljs-string">'data-id'</span>, <span class="hljs-keyword">this</span>.model.id);
    <span class="hljs-keyword">var</span> html = Mustache.render(<span class="hljs-keyword">this</span>.template, <span class="hljs-keyword">this</span>.toTemplateJSON());
    <span class="hljs-keyword">this</span>.$el.html(html);
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-17">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-17">&#182;</a>
              </div>
              <p>===================</p>

            </div>
            
        </li>
        
        
        <li id="section-18">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-18">&#182;</a>
              </div>
              <p>Cell Editor methods</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
  cellEditorTemplate: <span class="hljs-string">' \
    &lt;div class="menu-container data-table-cell-editor"&gt; \
      &lt;textarea class="data-table-cell-editor-editor" bind="textarea"&gt;{{value}}&lt;/textarea&gt; \
      &lt;div id="data-table-cell-editor-actions"&gt; \
        &lt;div class="data-table-cell-editor-action"&gt; \
          &lt;button class="okButton btn primary"&gt;Update&lt;/button&gt; \
          &lt;button class="cancelButton btn danger"&gt;Cancel&lt;/button&gt; \
        &lt;/div&gt; \
      &lt;/div&gt; \
    &lt;/div&gt; \
  '</span>,

  <span class="hljs-attr">onEditClick</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
    <span class="hljs-keyword">var</span> editing = <span class="hljs-keyword">this</span>.$el.find(<span class="hljs-string">'.data-table-cell-editor-editor'</span>);
    <span class="hljs-keyword">if</span> (editing.length &gt; <span class="hljs-number">0</span>) {
      editing.parents(<span class="hljs-string">'.data-table-cell-value'</span>).html(editing.text()).siblings(<span class="hljs-string">'.data-table-cell-edit'</span>).removeClass(<span class="hljs-string">"hidden"</span>);
    }
    $(e.target).addClass(<span class="hljs-string">"hidden"</span>);
    <span class="hljs-keyword">var</span> cell = $(e.target).siblings(<span class="hljs-string">'.data-table-cell-value'</span>);
    cell.data(<span class="hljs-string">"previousContents"</span>, cell.text());
    <span class="hljs-keyword">var</span> templated = Mustache.render(<span class="hljs-keyword">this</span>.cellEditorTemplate, {<span class="hljs-attr">value</span>: cell.text()});
    cell.html(templated);
  },

  <span class="hljs-attr">onEditorOK</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
    <span class="hljs-keyword">var</span> self = <span class="hljs-keyword">this</span>;
    <span class="hljs-keyword">var</span> cell = $(e.target);
    <span class="hljs-keyword">var</span> rowId = cell.parents(<span class="hljs-string">'tr'</span>).attr(<span class="hljs-string">'data-id'</span>);
    <span class="hljs-keyword">var</span> field = cell.parents(<span class="hljs-string">'td'</span>).attr(<span class="hljs-string">'data-field'</span>);
    <span class="hljs-keyword">var</span> newValue = cell.parents(<span class="hljs-string">'.data-table-cell-editor'</span>).find(<span class="hljs-string">'.data-table-cell-editor-editor'</span>).val();
    <span class="hljs-keyword">var</span> newData = {};
    newData[field] = newValue;
    <span class="hljs-keyword">this</span>.model.set(newData);
    <span class="hljs-keyword">this</span>.trigger(<span class="hljs-string">'recline:flash'</span>, {<span class="hljs-attr">message</span>: <span class="hljs-string">"Updating row..."</span>, <span class="hljs-attr">loader</span>: <span class="hljs-literal">true</span>});
    <span class="hljs-keyword">this</span>.model.save().then(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">response</span>) </span>{
        <span class="hljs-keyword">this</span>.trigger(<span class="hljs-string">'recline:flash'</span>, {<span class="hljs-attr">message</span>: <span class="hljs-string">"Row updated successfully"</span>, <span class="hljs-attr">category</span>: <span class="hljs-string">'success'</span>});
      })
      .fail(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">this</span>.trigger(<span class="hljs-string">'recline:flash'</span>, {
          <span class="hljs-attr">message</span>: <span class="hljs-string">'Error saving row'</span>,
          <span class="hljs-attr">category</span>: <span class="hljs-string">'error'</span>,
          <span class="hljs-attr">persist</span>: <span class="hljs-literal">true</span>
        });
      });
  },

  <span class="hljs-attr">onEditorCancel</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
    <span class="hljs-keyword">var</span> cell = $(e.target).parents(<span class="hljs-string">'.data-table-cell-value'</span>);
    cell.html(cell.data(<span class="hljs-string">'previousContents'</span>)).siblings(<span class="hljs-string">'.data-table-cell-edit'</span>).removeClass(<span class="hljs-string">"hidden"</span>);
  }
});

})(jQuery, recline.View);</pre></div></div>
            
        </li>
        
    </ul>
  </div>
</body>
</html>
